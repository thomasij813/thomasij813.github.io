<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      Algorithm Scripting -- Group By &middot; Thomas Johnson
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/styles.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/icon.png">
  <link rel="shortcut icon" href="/public/icon-small.png">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="Thomas Johnson" href="/atom.xml">

  <!-- JS -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.14.0/jquery.validate.min.js"></script>
  <script src="/script.js"></script>
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="/" title="Home">Thomas Johnson</a>
        </h3>
        <ul>
          
            
              <li><a class="small" href="/about">About</a></li>
            
          
            
              <li><a class="small" href="/projects">Projects</a></li>
            
          
            
              <li><a class="small" href="/archive">Archive</a></li>
            
          
            
              <li><a class="small" href="/contact">Contact</a></li>
            
          
        </ul>
        <div class="below-header">
          <div class="hr"></div>
          <img src="https://farm6.staticflickr.com/5831/20836963561_b5d4186595_o_d.jpg" alt="" class="zebra_image">
          <div class="hr"></div>
        </div>
      </header>

      <main>
        <article class="post">
  <h1 class="post-title">Algorithm Scripting -- Group By</h1>
  <time datetime="2016-06-25T00:00:00-07:00" class="post-date">25 Jun 2016</time>
  <p>In the <a href="/2016/06/19/sorted-union/">last post</a>, I explained how to solve Free Code Camp’s <a href="https://www.freecodecamp.com/challenges/sorted-union">Sorted Union</a> algorithm challenge. Today, I want to talk about a <a href="https://www.codewars.com">Codewars</a> algorithm challenge that I recently submitted a solution for.</p>

<h3 id="the-challenge-arrayprototypegroupby">The challenge: Array.prototype.groupBy</h3>

<p>Here’s a description of the challenge from the Codewars website:</p>

<blockquote>
  <p>Add a groupBy method to Array.prototype so that elements in an array could be grouped by the result of evaluating a function on each element.</p>

  <p>The method should return an object, in which for each different value returned by the function there is a property whose value is the array of elements that return the same value.</p>

  <p>If no function is passed, the element itself should be taken.</p>
</blockquote>

<p>These examples are provided to illustrate the concept:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// I'm using the expect testing library to frame these assertions.</span>

<span class="nx">expect</span><span class="p">(</span>
  <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">].</span><span class="nx">groupBy</span><span class="p">()</span>
<span class="p">).</span><span class="nx">toEqual</span><span class="p">({</span>
  <span class="mi">1</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
  <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
  <span class="mi">3</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span>
  <span class="mi">4</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">],</span>
  <span class="mi">5</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">],</span>
  <span class="mi">6</span><span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">]</span>
<span class="p">});</span>

<span class="nx">expect</span><span class="p">(</span>
  <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">].</span><span class="nx">groupBy</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">val</span> <span class="o">%</span> <span class="mi">3</span><span class="p">;}</span> <span class="p">)</span>
<span class="p">).</span><span class="nx">toEqual</span><span class="p">({</span>
  <span class="mi">0</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
  <span class="mi">1</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
  <span class="mi">2</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="p">})</span></code></pre></div>

<p>The description and the examples are pretty clear, so I don’t think there’s any reason to provide a detailed gloss on what is being asked for here. To put it briefly, the idea is to extend <code>Array.prototype</code> with a method that categorizes an array’s elements according to the value that gets generated when they are passed to a given function. The method should return an object, the structure of which is illustrated by the example cases.</p>

<p>The reason I like this challenge is because it gives me a good opportunity to talk about two features of ES6 that I find myself time and again: arrow function, Object.assign, and the spread operator.</p>

<h3 id="arrayprototype">Array.prototype</h3>

<p>Before we get to those features, however, let’s take a quick look at the first sentence in the challenge description:</p>

<blockquote>
  <p><em>Add a groupBy method to Array.prototype</em> so that elements in an array could be grouped by the result of evaluating a function on each element.</p>
</blockquote>

<p>Unlike most algorithm challenges, the function we’re being asked to create here is intended to be a method on <code>Array's</code> prototype. Rather than writing a function that takes a targeted array as it’s first argument (and presumably the sorting function as its second), here we want to create something that can be called from individual arrays.</p>

<p>So how do we go about doing that? Let’s think for a few minutes about some of the other methods that we call from arrays, like <code>push</code> or <code>slice</code>. Have you ever wondered why it is that you call these types of functions directly from an array? The reason is because they exist on <code>Array's</code> prototype. What does that mean?</p>

<p>All arrays are instances of the <code>Array</code> object, a global object that is used to construct arrays. This fact is sometimes forgotten because the preferred way of constructing arrays is to use the array literal syntax:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">frenchies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Derrida'</span><span class="p">,</span> <span class="s1">'Lacan'</span><span class="p">,</span> <span class="s1">'Barthes'</span><span class="p">];</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">frenchies</span><span class="p">);</span> <span class="c1">//  ['Derrida', 'Lacan', 'Barthes']</span></code></pre></div>

<p>But remember that just like objects you can use the <code>new</code> keyword to build arrays as well:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">frenchies</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="s1">'Derrida'</span><span class="p">,</span> <span class="s1">'Lacan'</span><span class="p">,</span> <span class="s1">'Barthes'</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">frenchies</span><span class="p">);</span> <span class="c1">//  ['Derrida', 'Lacan', 'Barthes']</span></code></pre></div>

<p>The fact that arrays are objects is why if you want to test for whether or not something is an array you have to use the <code>Array.isArray</code> method instead of <code>typeof</code>:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">frenchies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Derrida'</span><span class="p">,</span> <span class="s1">'Lacan'</span><span class="p">,</span> <span class="s1">'Barthes'</span><span class="p">];</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">frenchies</span><span class="p">)</span> <span class="c1">// 'object'</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">frenchies</span><span class="p">))</span> <span class="c1">// true</span></code></pre></div>

<p>This isn’t a bug in JavaScript. Point <code>typeof</code> at an array and it will faithfully tell you that it’s an object because that’s what it is. The fact that we like to construct arrays by way of the array literal syntax instead of the <code>new</code> keyword doesn’t change the fact that all arrays are just instances of the <code>Array</code> global object.</p>

<p>Knowing that arrays are instances of the <code>Array</code> object informs us that there also exists an <code>Array.prototype</code>, an object from which all <code>Array</code> instances inherit certain properties and methods. <code>push</code> and <code>slice</code> are in fact methods on <code>Array.prototype</code>, and when you call them from a specific instance of <code>Array</code>, all your doing is invoking those methods in such a way that within their execution the value of <code>this</code> refers to the specific array from which they are being invoked.</p>

<p>There’s nothing special about <code>Array.prototype</code>. It’s just an object with a bunch of methods that help out with traversing and mutating instances of <code>Array</code>. Beause it’s a prototype object, everything stored within <code>Array.prototype</code> is accessible by all of the instances of <code>Array</code> (that’s what it means when we say that <code>Array</code> inherits the methods and properties of <code>Array.prototype</code>). This fact can come in handy if we want to write a method that can be called from any array. All we need to do is simply add the method to <code>Array.prototype</code> just like we would do with any other object.</p>

<p>Let’s do that now with our <code>groupBy</code> method:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">frenchies</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Derrida'</span><span class="p">,</span> <span class="s1">'Lacan'</span><span class="p">,</span> <span class="s1">'Barthes'</span><span class="p">];</span>

<span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">groupBy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// We'll write out the logic required by the challenge later.</span>
  <span class="c1">// For now, let's just log this to the console.</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">brits</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Hall'</span><span class="p">,</span> <span class="s1">'Williams'</span><span class="p">,</span> <span class="s1">'Eagleton'</span><span class="p">];</span>

<span class="nx">frenchies</span><span class="p">.</span><span class="nx">groupBy</span><span class="p">();</span> <span class="c1">// ["Derrida", "Lacan", "Barthes"]</span>
<span class="nx">brits</span><span class="p">.</span><span class="nx">groupBy</span><span class="p">();</span>     <span class="c1">// ["Hall", "Williams", "Eagleton"]</span></code></pre></div>

<p>As you can see, <code>groupBy</code> can now be called from any array in our code, including the ones that were instantiated before we modified <code>Array.prototype</code>. Neat!</p>

<p><em>*** A quick word of caution before proceeding: it’s typically frowned upon to modify any of the built-in prototypes in JavaScript, including <code>Array.prototype</code>. See <a href="http://stackoverflow.com/questions/8859828/javascript-what-dangers-are-in-extending-array-prototype">this StackOverflow post</a> for a good discussion on the issue. ***</em></p>

</article>


<aside class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2016/06/19/sorted-union/">
            Algorithm Scripting -- Sorted Union
            <small><time datetime="2016-06-19T00:00:00-07:00">19 Jun 2016</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2016/06/16/its-been-a-while/">
            It's probably time for an update...
            <small><time datetime="2016-06-16T00:00:00-07:00">16 Jun 2016</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2015/12/01/getting-closure/">
            Getting Closure
            <small><time datetime="2015-12-01T00:00:00-08:00">01 Dec 2015</time></small>
          </a>
        </h3>
      </li>
    
  </ul>
</aside>


      </main>

      <footer class="footer">
        <small>
          &copy; <time datetime="2018-01-08T18:09:36-08:00">2018</time>. All rights reserved.
        </small>
      </footer>
    </div>
  </body>
</html>
